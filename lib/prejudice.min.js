/*! For license information please see prejudice.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("prejudice",[],t):"object"==typeof exports?exports.prejudice=t():e.prejudice=t()}(self,(()=>(()=>{var __webpack_modules__={490:function(e){e.exports=function(){"use strict";var e=function(){return e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},e.apply(this,arguments)},t=function(){function t(t,r){var n=this;this.timeoutHandle=null,this.isIdle=!1,this.startTime=0,this.remainingTime=0,this.lastPageX=-1,this.lastPageY=-1,this.eventNames=["DOMMouseScroll","mousedown","mousemove","mousewheel","MSPointerDown","MSPointerMove","keydown","touchmove","touchstart","wheel"],this.handleEvent=function(e){if(!(n.remainingTime>0)){if("mousemove"===e.type){var t=e,r=t.pageX,o=t.pageY;if(void 0===r&&void 0===o||r===n.lastPageX&&o===n.lastPageY)return;n.lastPageX=r,n.lastPageY=o}n.resetTimeout()}},this.callback=t,this.options=e({element:document.body,loop:!1,timeout:3e5},r);var o=this.options.element;this.eventNames.forEach((function(e){o.addEventListener(e,n.handleEvent)})),this.resetTimeout()}return t.prototype.pause=function(){var e=this.startTime+this.options.timeout-(new Date).getTime();e<=0||(this.remainingTime=e,this.timeoutHandle&&(window.clearTimeout(this.timeoutHandle),this.timeoutHandle=null))},t.prototype.resume=function(){this.remainingTime<=0||(this.resetTimeout(),this.remainingTime=0)},t.prototype.reset=function(){this.isIdle=!1,this.remainingTime=0,this.resetTimeout()},t.prototype.destroy=function(){var e=this,t=this.options.element;this.eventNames.forEach((function(r){t.removeEventListener(r,e.handleEvent)})),this.timeoutHandle&&window.clearTimeout(this.timeoutHandle)},t.prototype.resetTimeout=function(){var e=this;this.timeoutHandle&&(window.clearTimeout(this.timeoutHandle),this.timeoutHandle=null),this.isIdle&&!this.options.loop||(this.timeoutHandle=window.setTimeout((function(){e.handleTimeout()}),this.remainingTime||this.options.timeout),this.startTime=(new Date).getTime())},t.prototype.handleTimeout=function(){this.isIdle=!0,this.resetTimeout(),this.callback()},Object.defineProperty(t.prototype,"idle",{get:function(){return this.isIdle},set:function(e){e?this.handleTimeout():this.reset()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loop",{set:function(e){this.options.loop=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeout",{set:function(e){this.options.timeout=e},enumerable:!0,configurable:!0}),t}();return function(e,r){return new t(e,r)}}()},643:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__,definition;definition=function(){var context=this,XHR2;if("window"in context)var doc=document,byTag="getElementsByTagName",head=doc[byTag]("head")[0];else try{XHR2=__webpack_require__(676)}catch(e){throw new Error("Peer dependency `xhr2` required! Please npm install xhr2")}var httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(!0===e.crossOrigin){var t=context[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(context[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return context[xmlHttpRequest]?new XMLHttpRequest:XHR2?new XHR2:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};function succeed(e){var t=protocolRe.exec(e.url);return t=t&&t[1]||context.location.protocol,httpsRe.test(t)?twoHundo.test(e.request.status):!!e.request.response}function handleReadyState(e,t,r){return function(){return e._aborted?r(e.request):e._timedOut?r(e.request,"Request is aborted: timeout"):void(e.request&&4==e.request[readyState]&&(e.request.onreadystatechange=noop,succeed(e)?t(e.request):r(e.request)))}}function setHeaders(e,t){var r,n=t.headers||{};n.Accept=n.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"];var o="undefined"!=typeof FormData&&t.data instanceof FormData;for(r in t.crossOrigin||n[requestedWith]||(n[requestedWith]=defaultHeaders.requestedWith),n[contentType]||o||(n[contentType]=t.contentType||defaultHeaders.contentType),n)n.hasOwnProperty(r)&&"setRequestHeader"in e&&e.setRequestHeader(r,n[r])}function setCredentials(e,t){void 0!==t.withCredentials&&void 0!==e.withCredentials&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,r,n){var o=uniqid++,i=e.jsonpCallback||"callback",s=e.jsonpCallbackName||reqwest.getcallbackPrefix(o),u=new RegExp("((^|\\?|&)"+i+")=([^&]+)"),a=n.match(u),c=doc.createElement("script"),l=0,f=-1!==navigator.userAgent.indexOf("MSIE 10.0");return a?"?"===a[3]?n=n.replace(u,"$1="+s):s=a[3]:n=urlappend(n,i+"="+s),context[s]=generalCallback,c.type="text/javascript",c.src=n,c.async=!0,void 0===c.onreadystatechange||f||(c.htmlFor=c.id="_reqwest_"+o),c.onload=c.onreadystatechange=function(){if(c[readyState]&&"complete"!==c[readyState]&&"loaded"!==c[readyState]||l)return!1;c.onload=c.onreadystatechange=null,c.onclick&&c.onclick(),t(lastValue),lastValue=void 0,head.removeChild(c),l=1},head.appendChild(c),{abort:function(){c.onload=c.onreadystatechange=null,r({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(c),l=1}}}function getRequest(e,t){var r,n=this.o,o=(n.method||"GET").toUpperCase(),i="string"==typeof n?n:n.url,s=!1!==n.processData&&n.data&&"string"!=typeof n.data?reqwest.toQueryString(n.data):n.data||null,u=!1;return"jsonp"!=n.type&&"GET"!=o||!s||(i=urlappend(i,s),s=null),"jsonp"==n.type?handleJsonp(n,e,t,i):((r=n.xhr&&n.xhr(n)||xhr(n)).open(o,i,!1!==n.async),setHeaders(r,n),setCredentials(r,n),context[xDomainRequest]&&r instanceof context[xDomainRequest]?(r.onload=e,r.onerror=t,r.onprogress=function(){},u=!0):r.onreadystatechange=handleReadyState(this,e,t),n.before&&n.before(r),u?setTimeout((function(){r.send(s)}),200):r.send(s),r)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){if(null!==e)return e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0}function init(o,fn){this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;function complete(e){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(e)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=context.JSON?context.JSON.parse(r):eval("("+r+")")}catch(e){return error(resp,"Could not parse JSON in response",e)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(e,t,r){for(e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=r,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(e,t,r);complete(e)}fn=fn||function(){},o.timeout&&(this.timeout=setTimeout((function(){timedOut()}),o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push((function(){o.error.apply(o,arguments)})),o.complete&&this._completeHandlers.push((function(){o.complete.apply(o,arguments)})),this.request=getRequest.call(this,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var r,n,o,i,s=e.name,u=e.tagName.toLowerCase(),a=function(e){e&&!e.disabled&&t(s,normalize(e.attributes.value&&e.attributes.value.specified?e.value:e.text))};if(!e.disabled&&s)switch(u){case"input":/reset|button|image|file/i.test(e.type)||(r=/checkbox/i.test(e.type),n=/radio/i.test(e.type),o=e.value,(!r&&!n||e.checked)&&t(s,normalize(r&&""===o?"on":o)));break;case"textarea":t(s,normalize(e.value));break;case"select":if("select-one"===e.type.toLowerCase())a(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(i=0;e.length&&i<e.length;i++)e.options[i].selected&&a(e.options[i])}}function eachFormElement(){var e,t,r=this,n=function(e,t){var n,o,i;for(n=0;n<t.length;n++)for(i=e[byTag](t[n]),o=0;o<i.length;o++)serial(i[o],r)};for(t=0;t<arguments.length;t++)/input|select|textarea/i.test((e=arguments[t]).tagName)&&serial(e,r),n(e,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply((function(t,r){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(r)):e[t]=r}),arguments),e}function buildParams(e,t,r,n){var o,i,s,u=/\[\]$/;if(isArray(t))for(i=0;t&&i<t.length;i++)s=t[i],r||u.test(e)?n(e,s):buildParams(e+"["+("object"==typeof s?i:"")+"]",s,r,n);else if(t&&"[object Object]"===t.toString())for(o in t)buildParams(e+"["+o+"]",t[o],r,n);else n(e,t)}return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this},catch:function(e){return this.fail(e)}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply((function(t,r){e.push({name:t,value:r})}),arguments),e},reqwest.serialize=function(){if(0===arguments.length)return"";var e,t=Array.prototype.slice.call(arguments,0);return(e=t.pop())&&e.nodeType&&t.push(e)&&(e=null),e&&(e=e.type),("map"==e?serializeHash:"array"==e?reqwest.serializeArray:serializeQueryString).apply(null,t)},reqwest.toQueryString=function(e,t){var r,n,o=t||!1,i=[],s=encodeURIComponent,u=function(e,t){t="function"==typeof t?t():null==t?"":t,i[i.length]=s(e)+"="+s(t)};if(isArray(e))for(n=0;e&&n<e.length;n++)u(e[n].name,e[n].value);else for(r in e)e.hasOwnProperty(r)&&buildParams(r,e[r],o,u);return i.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){for(var t in e=e||{})globalSetupOptions[t]=e[t]},reqwest},module.exports?module.exports=definition():void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=definition)?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},676:()=>{}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};return(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,s=void 0,s=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(i,"string"),"symbol"===e(s)?s:String(s)),o)}var i,s}__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>Ee});var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.records={},this.observers=[],this.addObserver=this.addObserver.bind(this),this.notifyObservers=this.notifyObservers.bind(this),this.add=this.add.bind(this),this.remove=this.remove.bind(this),this.clear=this.clear.bind(this),this.list=this.list.bind(this),this.count=this.count.bind(this),this.findIndex=this.findIndex.bind(this),this.getInstance=this.getInstance.bind(this)}var r,n,o;return r=e,(n=[{key:"getInstance",value:function(){return new this.constructor}},{key:"notifyObservers",value:function(){return this.observers.forEach((function(e){"function"==typeof e&&e(this.records)}),this),this}},{key:"addObserver",value:function(e){return this.observers.push(e),this}},{key:"add",value:function(e){return-1===this.findIndex(e)&&(this.records[e.datastore]=this.records[e.datastore]||[],this.records[e.datastore].push(e),this.notifyObservers(),!0)}},{key:"findIndex",value:function(e){return this.records[e.datastore]?this.records[e.datastore].findIndex((function(t){return t.datastore===e.datastore&&t.uid===e.uid})):-1}},{key:"remove",value:function(e){var t=this.findIndex(e);return t>=0&&(this.records[e.datastore].splice(t,1),this.notifyObservers(),!0)}},{key:"clear",value:function(e){return e&&this.count(e)>0?(this.records[e]=[],this.notifyObservers(),!0):this.count()>0&&(this.records={},this.notifyObservers(),!0)}},{key:"list",value:function(e){if(e)return this.records[e]||[];var t=[];return Object.keys(this.records).forEach((function(e){t=t.concat(this.list(e))}),this),t}},{key:"count",value:function(e){if(e)return this.list(e).length;var t=0;return Object.keys(this.records).forEach((function(e){t+=this.count(e)}),this),t}}])&&t(r.prototype,n),o&&t(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();const n=new r;function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,s=void 0,s=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(s)?s:String(s)),n)}var i,s}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},s.apply(this,arguments)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}(this,r)}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}const f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(f,e);var t,r,n,o=a(f);function f(e,t){var r,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(r=o.call(this)).key=t,r.storage=e,r.read(),__webpack_require__.g.window.addEventListener("storage",(n=c(r),function(e){e.storageArea===n.storage&&(n.read(),n.notifyObservers())})),r.read=r.read.bind(c(r)),r.write=r.write.bind(c(r)),r}return t=f,(r=[{key:"getInstance",value:function(){return this}},{key:"read",value:function(){try{this.records=JSON.parse(this.storage.getItem(this.key))||{}}catch(e){this.records={}}return this}},{key:"write",value:function(){return this.storage.setItem(this.key,JSON.stringify(this.records)),this}},{key:"add",value:function(e){return!!s(l(f.prototype),"add",this).call(this,e)&&(this.write(),!0)}},{key:"remove",value:function(e){return!!s(l(f.prototype),"remove",this).call(this,e)&&(this.write(),!0)}},{key:"clear",value:function(e){return!!s(l(f.prototype),"clear",this).call(this,e)&&(this.write(),!0)}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(r);var p=n;void 0!==__webpack_require__.g.window&&(p=new f(__webpack_require__.g.window.sessionStorage,"Prejudice.sessionStorage"));const d=p;var y=n;void 0!==__webpack_require__.g.window&&(y=new f(__webpack_require__.g.window.localStorage,"Prejudice.localStorage"));const h=y;var b=__webpack_require__(643),m=__webpack_require__.n(b);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==v(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===v(i)?i:String(i)),n)}var o,i}const g=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t&&t.baseUrl||"",this.observers=[],this.apply=this.apply.bind(this),this.registerBaseUrl=this.registerBaseUrl.bind(this),this.getUrl=this.getUrl.bind(this),this.addObserver=this.addObserver.bind(this)}var t,r,n;return t=e,(r=[{key:"getUrl",value:function(){return[this.baseUrl,this.path].join("/")}},{key:"apply",value:function(e,t){return this.observers.forEach((function(t){"function"==typeof t&&t(e)}),this),m()({url:this.getUrl(),data:JSON.stringify(e),type:"json",method:"post",contentType:"application/json",withCredentials:!0,error:t,success:t}),this}},{key:"registerBaseUrl",value:function(e){return this.baseUrl=e,this}},{key:"addObserver",value:function(e){this.observers.push(e)}}])&&_(t.prototype,r),n&&_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==w(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===w(i)?i:String(i)),n)}var o,i}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P(e);if(t){var o=P(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}const R=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(i,e);var t,r,n,o=S(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).path="text",e}return t=i,r&&O(t.prototype,r),n&&O(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(g));function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==k(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===k(i)?i:String(i)),n)}var o,i}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=q(e);if(t){var o=q(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}const D=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(i,e);var t,r,n,o=x(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).path="email",e}return t=i,r&&T(t.prototype,r),n&&T(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(g));function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==H(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===H(i)?i:String(i)),n)}var o,i}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=N(e);if(t){var o=N(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===H(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return U(e)}(this,r)}}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},N(e)}const B=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(i,e);var t,r,n,o=I(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).path="file",e.formId="action-file-download",e.targetName="action-file-download-target",e.ensureForm=e.ensureForm.bind(U(e)),e.submitForm=e.submitForm.bind(U(e)),e.setFormInput=e.setFormInput.bind(U(e)),e.ensureTarget=e.ensureTarget.bind(U(e)),e}return t=i,(r=[{key:"ensureTarget",value:function(){if(__webpack_require__.g.document.getElementsByName(this.targetName).length>0)return this;var e=__webpack_require__.g.document.createElement("iframe");return e.src="about:blank",e.name=this.targetName,e.style="visibility: hidden; display: none;",__webpack_require__.g.document.body.appendChild(e),this}},{key:"ensureForm",value:function(){if(__webpack_require__.g.document.getElementById(this.formId))return this;var e=__webpack_require__.g.document.createElement("form"),t=__webpack_require__.g.document.createElement("input");return e.id=this.formId,e.action=this.getUrl(),e.method="post",e.target=this.targetName,e.enctype="text/plain",t.type="hidden",e.appendChild(t),__webpack_require__.g.document.body.appendChild(e),this}},{key:"setFormInput",value:function(e){var t=__webpack_require__.g.document.getElementById(this.formId).children[0];t.name=JSON.stringify(e).slice(0,-1)+',"_":"',t.value='"}'}},{key:"submitForm",value:function(){__webpack_require__.g.document.getElementById(this.formId).submit()}},{key:"apply",value:function(e,t){this.ensureTarget(),this.ensureForm(),this.setFormInput(e),this.submitForm(),t(null,{status:"Success"})}}])&&C(t.prototype,r),n&&C(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(g));function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==F(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===F(i)?i:String(i)),n)}var o,i}function X(e,t,r){return t&&M(e.prototype,t),r&&M(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}const L=X((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==W(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===W(i)?i:String(i)),n)}var o,i}const J=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.engine=null,this.registerEngine=this.registerEngine.bind(this)}var t,r,n;return t=e,(r=[{key:"registerEngine",value:function(e){this.engine=e}}])&&z(t.prototype,r),n&&z(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function K(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==Y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Y(i)?i:String(i)),n)}var o,i}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=G(e);if(t){var o=G(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $(e)}(this,r)}}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},G(e)}const Z=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(i,e);var t,r,n,o=Q(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).dataToRecord=e.dataToRecord.bind($(e)),e.match=e.match.bind($(e)),e}return t=i,(r=[{key:"match",value:function(e){return e.datastoreUid&&e.recordUid}},{key:"dataToRecord",value:function(e){return this.engine.requestRecord(e.datastoreUid,e.recordUid)}}])&&K(t.prototype,r),n&&K(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(J));function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==ee(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ee(i)?i:String(i)),n)}var o,i}function re(e,t){return re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},re(e,t)}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ie(e);if(t){var o=ie(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oe(e)}(this,r)}}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e){return ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ie(e)}const se=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&re(e,t)}(i,e);var t,r,n,o=ne(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).dataToRecord=e.dataToRecord.bind(oe(e)),e.match=e.match.bind(oe(e)),e}return t=i,(r=[{key:"match",value:function(e){return e.datastore&&e.uid}},{key:"dataToRecord",value:function(e){return this.engine.requestRecord(e.datastore,e.uid)}}])&&te(t.prototype,r),n&&te(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(J));function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==ue(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ue(i)?i:String(i)),n)}var o,i}function ce(e,t){return ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ce(e,t)}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=pe(e);if(t){var o=pe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fe(e)}(this,r)}}function fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pe(e){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pe(e)}const de=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ce(e,t)}(i,e);var t,r,n,o=le(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).dataToRecord=e.dataToRecord.bind(fe(e)),e.match=e.match.bind(fe(e)),e}return t=i,(r=[{key:"match",value:function(e){return e instanceof this.engine.Core.Record}},{key:"dataToRecord",value:function(e){return e}}])&&ae(t.prototype,r),n&&ae(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(J));function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function he(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==ye(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ye(i)?i:String(i)),n)}var o,i}const be=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"match",value:function(e){return!1}},{key:"dataToRecord",value:function(){return this}}])&&he(t.prototype,r),n&&he(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}());var me=__webpack_require__(490),ve=__webpack_require__.n(me);function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==_e(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===_e(i)?i:String(i)),n)}var o,i}const we=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.idleTimer=null,this.setIdleTimer=this.setIdleTimer.bind(this)}var t,r,n;return t=e,(r=[{key:"setIdleTimer",value:function(){return this.idleTimer=ve()((function(){}),{element:document,timeout:36e5}),this}}])&&ge(t.prototype,r),n&&ge(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}());function Oe(e){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe(e)}function je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==Oe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Oe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Oe(i)?i:String(i)),n)}var o,i}const Se=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.last={},this.baseUrl=null,this.observers=[],this.interval=null,this.intervalDuration=3e5,this.idleDetection=we,this.registerBaseUrl=this.registerBaseUrl.bind(this),this.addObserver=this.addObserver.bind(this),this.notifyObservers=this.notifyObservers.bind(this),this.update=this.update.bind(this),this.handleData=this.handleData.bind(this),this.getUrl=this.getUrl.bind(this),this.setInterval=this.setInterval.bind(this),this.getInstance=this.getInstance.bind(this)}var t,r,n;return t=e,r=[{key:"getInstance",value:function(){return this}},{key:"setInterval",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return this.interval||(this.interval=setInterval((e=this,function(){e.update()}),this.intervalDuration)),this;var e}))},{key:"notifyObservers",value:function(){this.observers.forEach((function(e){"function"==typeof e&&e(this.last)}),this)}},{key:"update",value:function(){if(this.idleDetection.idleTimer&&this.idleDetection.idleTimer.isIdle)return this.idleDetection.setIdleTimer(),this;if(this.baseUrl&&this.observers.length>0){var e=(t=this,function(e){t.handleData(e)});m()({url:this.getUrl(),type:"json",method:"get",contentType:"application/json",withCredentials:!0,error:e,success:e})}var t;return this}},{key:"handleData",value:function(e){return JSON.stringify(this.last)!==JSON.stringify(e)&&(this.last=e,this.notifyObservers()),this}},{key:"getUrl",value:function(){return this.baseUrl?[this.baseUrl,"profile"].join("/"):null}},{key:"addObserver",value:function(e){return e(this.last),this.observers.push(e),this.startup(),this}},{key:"startup",value:function(){return!this.interval&&this.baseUrl&&this.observers.length>0&&(this.last={},this.idleDetection.setIdleTimer(),this.update(),this.setInterval()),this}},{key:"registerBaseUrl",value:function(e){return this.baseUrl=e,this.startup(),this}}],r&&je(t.prototype,r),n&&je(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}());function Pe(e){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pe(e)}function Re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ke(n.key),n)}}function ke(e){var t=function(e,t){if("object"!==Pe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Pe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Pe(t)?t:String(t)}var Te=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.recordStorage=(t.recordStorage||d).getInstance(),this.actions={text:R,email:D,file:B},this.datastores={},this.profile=Se.getInstance(),this.addObserver=this.addObserver.bind(this),this.setRecordStorage=this.setRecordStorage.bind(this),this.addRecord=this.addRecord.bind(this),this.listRecords=this.listRecords.bind(this),this.removeRecord=this.removeRecord.bind(this),this.act=this.act.bind(this),this.clearRecords=this.clearRecords.bind(this),this.registerRecordEngine=this.registerRecordEngine.bind(this),this.resolveRecord=this.resolveRecord.bind(this),this.registerDatastore=this.registerDatastore.bind(this),this.registerActionBaseUrl=this.registerActionBaseUrl.bind(this),this.addProfileObserver=this.addProfileObserver.bind(this),t.recordEngine&&this.registerRecordEngine(t.recordEngine),t.datastores&&t.datastores.forEach((function(e){e.slug&&e.uid&&(this.datastores[e.uid]=[t.baseUrl||__webpack_require__.g.window.location.origin,e.slug,"record"].join("/"))}),this),t.actionBaseUrl&&this.registerActionBaseUrl(t.actionBaseUrl)}var t,r,n;return t=e,(r=[{key:"registerActionBaseUrl",value:function(e){return this.profile.registerBaseUrl(e),this.actions.text.registerBaseUrl(e),this.actions.email.registerBaseUrl(e),this.actions.file.registerBaseUrl(e),this}},{key:"registerDatastore",value:function(e,t){return this.datastores[e]=t,this}},{key:"registerRecordEngine",value:function(t){return e.Driver.Record.UidHash.registerEngine(t),e.Driver.Record.ReactHash.registerEngine(t),e.Driver.Record.Pride.registerEngine(t),this}},{key:"addProfileObserver",value:function(e){return this.profile.addObserver(e),this}},{key:"addObserver",value:function(e){return this.recordStorage.addObserver(e),this}},{key:"setRecordStorage",value:function(e){return this.recordStorage=e,this}},{key:"addRecord",value:function(e){return e.uid&&e.datastore?(this.recordStorage.add(e),this):((e=this.resolveRecord(e)).renderFull(function(e,t){return function(r){r.has_holdings?e.getHoldings(function(e,t){return function(r){t.rawHoldings=r,e.add(t)}}(t,r)):t.add(r)}}(e,this.recordStorage)),this)}},{key:"resolveRecord",value:function(t){return e.Driver.Record.ReactHash.match(t)?e.Driver.Record.ReactHash.dataToRecord(t):e.Driver.Record.UidHash.match(t)?e.Driver.Record.UidHash.dataToRecord(t):e.Driver.Record.Pride.match(t)?e.Driver.Record.Pride.dataToRecord(t):e.Driver.Record.Null.dataToRecord(t)}},{key:"listRecords",value:function(e){return this.recordStorage.list(e)}},{key:"countRecords",value:function(e){return this.recordStorage.count(e)}},{key:"removeRecord",value:function(e){return e.uid&&e.datastore?(this.recordStorage.remove(e),this):((e=this.resolveRecord(e)).renderFull((t=this.recordStorage,function(e){t.remove(e)})),this);var t}},{key:"act",value:function(e,t,r,n){var o,i,s;return this.actions[e].apply((o={to:r},i=t,s={records:this.listRecords(t).map((function(e){return e.uid})),base_url:this.datastores[t]},(i=ke(i))in o?Object.defineProperty(o,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[i]=s,o),n),this}},{key:"clearRecords",value:function(e){return this.recordStorage.clear(e),this}}])&&Re(t.prototype,r),n&&Re(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();Object.defineProperty(Te,"SessionStorageDriver",{value:d}),Object.defineProperty(Te,"LocalStorageDriver",{value:h}),Object.defineProperty(Te,"VariableStorageDriver",{value:n}),Object.defineProperty(Te,"Profile",{value:Se}),Object.defineProperty(Te,"IdleTimeout",{value:we}),Object.defineProperty(Te,"Action",{value:g}),Object.defineProperty(Te.Action,"Text",{value:R}),Object.defineProperty(Te.Action,"Email",{value:D}),Object.defineProperty(Te.Action,"File",{value:B}),Object.defineProperty(Te,"Driver",{value:L}),Object.defineProperty(Te.Driver,"Record",{value:J}),Object.defineProperty(Te.Driver.Record,"UidHash",{value:Z}),Object.defineProperty(Te.Driver.Record,"ReactHash",{value:se}),Object.defineProperty(Te.Driver.Record,"Pride",{value:de}),Object.defineProperty(Te.Driver.Record,"Null",{value:be});const Ee=Te})(),__webpack_exports__})()));
//# sourceMappingURL=prejudice.min.js.map