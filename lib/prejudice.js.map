{"version":3,"sources":["webpack://prejudice/webpack/universalModuleDefinition","webpack://prejudice/./src/Prejudice.js","webpack://prejudice/./src/Prejudice/Action.js","webpack://prejudice/./src/Prejudice/Action/Email.js","webpack://prejudice/./src/Prejudice/Action/File.js","webpack://prejudice/./src/Prejudice/Action/Text.js","webpack://prejudice/./src/Prejudice/Driver/Record.js","webpack://prejudice/./src/Prejudice/Driver/Record/Null.js","webpack://prejudice/./src/Prejudice/Driver/Record/Pride.js","webpack://prejudice/./src/Prejudice/Driver/Record/ReactHash.js","webpack://prejudice/./src/Prejudice/Driver/Record/UidHash.js","webpack://prejudice/./src/Prejudice/IdleTimeout.js","webpack://prejudice/./src/Prejudice/LocalStorageDriver.js","webpack://prejudice/./src/Prejudice/PersistantStorageDriver.js","webpack://prejudice/./src/Prejudice/Profile.js","webpack://prejudice/./src/Prejudice/SessionStorageDriver.js","webpack://prejudice/./src/Prejudice/VariableStorageDriver.js","webpack://prejudice/./node_modules/idle-timeout/dist/idle-timeout.js","webpack://prejudice/./node_modules/reqwest/reqwest.js","webpack://prejudice/webpack/bootstrap","webpack://prejudice/webpack/runtime/global","webpack://prejudice/webpack/startup"],"names":["root","factory","exports","module","define","amd","self","Prejudice","init","this","recordStorage","SessionStorageDriver","getInstance","actions","text","Text","email","Email","file","File","datastores","profile","Profile","addObserver","bind","setRecordStorage","addRecord","listRecords","removeRecord","act","clearRecords","registerRecordEngine","resolveRecord","registerDatastore","registerActionBaseUrl","addProfileObserver","recordEngine","forEach","datastore","slug","uid","baseUrl","global","window","location","origin","join","actionBaseUrl","registerBaseUrl","datastoreUid","datastoreBaseUrl","engine","Driver","Record","UidHash","registerEngine","ReactHash","Pride","observer","storage","record","add","renderFull","data","has_holdings","getHoldings","holdings","match","dataToRecord","Null","list","count","remove","action","argument","callback","apply","to","records","map","item","clear","Object","defineProperty","value","LocalStorageDriver","VariableStorageDriver","IdleTimeout","Action","observers","getUrl","path","url","JSON","stringify","type","method","contentType","withCredentials","error","success","push","formId","targetName","ensureForm","submitForm","setFormInput","ensureTarget","document","getElementsByName","length","iframe","createElement","src","name","style","body","appendChild","getElementById","form","input","id","target","enctype","children","slice","submit","status","Core","requestRecord","recordUid","idleTimer","setIdleTimer","element","timeout","exp","PersistantStorageDriver","localStorage","key","driver","read","addEventListener","e","storageArea","notifyObservers","write","parse","getItem","setItem","last","interval","intervalDuration","idleDetection","update","handleData","setInterval","isIdle","startup","sessionStorage","findIndex","constructor","idx","splice","ret","keys","concat","__assign","assign","t","s","i","n","arguments","p","prototype","hasOwnProperty","call","options","_this","timeoutHandle","startTime","remainingTime","lastPageX","lastPageY","eventNames","handleEvent","event","_a","pageX","pageY","undefined","resetTimeout","loop","eventName","pause","Date","getTime","clearTimeout","resume","reset","destroy","removeEventListener","setTimeout","handleTimeout","get","set","enumerable","configurable","definition","context","XHR2","doc","byTag","head","ex","Error","httpsRe","protocolRe","twoHundo","readyState","requestedWith","uniqid","callbackPrefix","lastValue","xmlHttpRequest","xDomainRequest","noop","isArray","Array","a","defaultHeaders","xhr","o","XMLHttpRequest","XDomainRequest","ActiveXObject","globalSetupOptions","dataFilter","succeed","r","protocol","exec","test","request","response","handleReadyState","_aborted","_timedOut","onreadystatechange","setHeaders","http","h","headers","isAFormData","FormData","setRequestHeader","setCredentials","generalCallback","urlappend","handleJsonp","fn","err","reqId","cbkey","cbval","reqwest","getcallbackPrefix","cbreg","RegExp","script","loaded","isIE10","navigator","userAgent","indexOf","replace","async","htmlFor","onload","onclick","removeChild","abort","getRequest","toUpperCase","toQueryString","sendWait","open","onerror","onprogress","send","Reqwest","setType","header","_fulfilled","_successHandler","_fulfillmentHandlers","_errorHandlers","_completeHandlers","_erred","_responseArgs","complete","resp","shift","getResponseHeader","filteredResponse","responseText","eval","responseXML","parseError","errorCode","reason","timedOut","msg","normalize","serial","el","cb","ch","ra","val","tagName","toLowerCase","optCb","disabled","checked","selectedIndex","selected","eachFormElement","serializeSubtags","tags","j","fa","serializeQueryString","serializeArray","serializeHash","hash","buildParams","prefix","obj","traditional","v","rbracket","toString","retry","then","fail","always","arr","serialize","opt","args","pop","nodeType","trad","enc","encodeURIComponent","compat","ajaxSetup","k","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","g","globalThis","Function","__webpack_exports__"],"mappings":"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","file":"prejudice.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"prejudice\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"prejudice\"] = factory();\n\telse\n\t\troot[\"prejudice\"] = factory();\n})(self, function() {\nreturn ","'use strict';\n\nimport SessionStorageDriver from './Prejudice/SessionStorageDriver';\nimport LocalStorageDriver from './Prejudice/LocalStorageDriver';\nimport VariableStorageDriver from './Prejudice/VariableStorageDriver';\n\nimport Action from './Prejudice/Action';\nimport Text from './Prejudice/Action/Text';\nimport Email from './Prejudice/Action/Email';\nimport File from './Prejudice/Action/File';\n\nimport Driver from './Prejudice/Driver';\nimport Record from './Prejudice/Driver/Record';\nimport UidHash from './Prejudice/Driver/Record/UidHash';\nimport ReactHash from './Prejudice/Driver/Record/ReactHash';\nimport Pride from './Prejudice/Driver/Record/Pride';\nimport Null from './Prejudice/Driver/Record/Null';\n\nimport Profile from './Prejudice/Profile';\n\nimport IdleTimeout from './Prejudice/IdleTimeout';\n\nconst Prejudice = class Prejudice {\n  constructor(init) {\n    this.recordStorage = (init.recordStorage || SessionStorageDriver).getInstance();\n    this.actions = {\n      text: Text,\n      email: Email,\n      file: File\n    };\n    this.datastores = {};\n\n    this.profile = Profile.getInstance();\n\n    this.addObserver = this.addObserver.bind(this);\n    this.setRecordStorage = this.setRecordStorage.bind(this);\n    this.addRecord = this.addRecord.bind(this);\n    this.listRecords = this.listRecords.bind(this);\n    this.removeRecord = this.removeRecord.bind(this);\n    this.act = this.act.bind(this);\n    this.clearRecords = this.clearRecords.bind(this);\n    this.registerRecordEngine = this.registerRecordEngine.bind(this);\n    this.resolveRecord = this.resolveRecord.bind(this);\n    this.registerDatastore = this.registerDatastore.bind(this);\n    this.registerActionBaseUrl = this.registerActionBaseUrl.bind(this);\n    this.addProfileObserver = this.addProfileObserver.bind(this);\n    if (init.recordEngine) {\n      this.registerRecordEngine(init.recordEngine);\n    }\n\n    if (init.datastores) {\n      init.datastores.forEach(function (datastore) {\n        if (datastore.slug && datastore.uid) {\n          this.datastores[datastore.uid] = [\n            init.baseUrl || global.window.location.origin,\n            datastore.slug,\n            'record'\n          ].join('/');\n        }\n      }, this);\n    }\n\n    if (init.actionBaseUrl) {\n      this.registerActionBaseUrl(init.actionBaseUrl);\n    }\n\n  }\n\n  registerActionBaseUrl(baseUrl) {\n    this.profile.registerBaseUrl(baseUrl);\n    this.actions['text'].registerBaseUrl(baseUrl);\n    this.actions['email'].registerBaseUrl(baseUrl);\n    this.actions['file'].registerBaseUrl(baseUrl);\n    return this;\n  }\n\n  registerDatastore(datastoreUid, datastoreBaseUrl) {\n    this.datastores[datastoreUid] = datastoreBaseUrl;\n    return this;\n  }\n\n  registerRecordEngine(engine) {\n    Prejudice.Driver.Record.UidHash.registerEngine(engine);\n    Prejudice.Driver.Record.ReactHash.registerEngine(engine);\n    Prejudice.Driver.Record.Pride.registerEngine(engine);\n    return this;\n  }\n\n  addProfileObserver(observer) {\n    this.profile.addObserver(observer);\n    return this;\n  }\n\n  addObserver(observer) {\n    this.recordStorage.addObserver(observer);\n    return this;\n  }\n\n  setRecordStorage(storage) {\n    this.recordStorage = storage;\n    return this;\n  }\n\n  addRecord(record) {\n    if (record.uid && record.datastore) {\n      this.recordStorage.add(record);\n      return this;\n    }\n    record = this.resolveRecord(record);\n    record.renderFull((function (record, recordStorage) {\n      return function (data) {\n        if (data.has_holdings) {\n          record.getHoldings((function (recordStorage, data) {\n            return function (holdings) {\n              data['rawHoldings'] = holdings;\n              recordStorage.add(data);\n            };\n          })(recordStorage, data));\n        } else {\n          recordStorage.add(data);\n        }\n      };\n    })(record, this.recordStorage));\n    return this;\n  }\n\n  resolveRecord(data) {\n    if (Prejudice.Driver.Record.ReactHash.match(data)) {\n      return Prejudice.Driver.Record.ReactHash.dataToRecord(data);\n    } else if (Prejudice.Driver.Record.UidHash.match(data)) {\n      return Prejudice.Driver.Record.UidHash.dataToRecord(data);\n    } else if (Prejudice.Driver.Record.Pride.match(data)) {\n      return Prejudice.Driver.Record.Pride.dataToRecord(data);\n    }\n    return Prejudice.Driver.Record.Null.dataToRecord(data);\n  }\n\n  listRecords(datastore) {\n    return this.recordStorage.list(datastore);\n  }\n\n  countRecords(datastore) {\n    return this.recordStorage.count(datastore);\n  }\n\n  removeRecord(record) {\n    if (record.uid && record.datastore) {\n      this.recordStorage.remove(record);\n      return this;\n    }\n    record = this.resolveRecord(record);\n    record.renderFull((function (recordStorage) {\n      return function (data) {\n        recordStorage.remove(data);\n      };\n    })(this.recordStorage));\n    return this;\n  }\n\n  act(action, datastore, argument, callback) {\n    this.actions[action].apply(\n      {\n        to: argument,\n        [datastore]: {\n          records: this.listRecords(datastore).map(item => item.uid),\n          ['base_url']: this.datastores[datastore]\n        }\n      },\n      callback\n    );\n    return this;\n  }\n\n  clearRecords(datastore) {\n    this.recordStorage.clear(datastore);\n    return this;\n  }\n};\n\nObject.defineProperty(Prejudice, 'SessionStorageDriver', {value: SessionStorageDriver});\nObject.defineProperty(Prejudice, 'LocalStorageDriver', {value: LocalStorageDriver});\nObject.defineProperty(Prejudice, 'VariableStorageDriver', {value: VariableStorageDriver});\n\nObject.defineProperty(Prejudice, 'Profile', {value: Profile});\n\nObject.defineProperty(Prejudice, 'IdleTimeout', {value: IdleTimeout});\n\nObject.defineProperty(Prejudice, 'Action', {value: Action});\nObject.defineProperty(Prejudice.Action, 'Text', {value: Text});\nObject.defineProperty(Prejudice.Action, 'Email', {value: Email});\nObject.defineProperty(Prejudice.Action, 'File', {value: File});\n\nObject.defineProperty(Prejudice, 'Driver', {value: Driver});\nObject.defineProperty(Prejudice.Driver, 'Record', {value: Record});\nObject.defineProperty(Prejudice.Driver.Record, 'UidHash', {value: UidHash});\nObject.defineProperty(Prejudice.Driver.Record, 'ReactHash', {value: ReactHash});\nObject.defineProperty(Prejudice.Driver.Record, 'Pride', {value: Pride});\nObject.defineProperty(Prejudice.Driver.Record, 'Null', {value: Null});\n\nexport default Prejudice;\n","import reqwest from 'reqwest';\n\nconst Action = class Action {\n  constructor(init) {\n    this.baseUrl = (init && init.baseUrl) || '';\n    this.observers = [];\n\n    this.apply = this.apply.bind(this);\n    this.registerBaseUrl = this.registerBaseUrl.bind(this);\n    this.getUrl = this.getUrl.bind(this);\n    this.addObserver = this.addObserver.bind(this);\n  }\n\n  getUrl() {\n    return [this.baseUrl, this.path].join('/');\n  }\n\n  apply(data, callback) {\n    this.observers.forEach(\n      function (observer) {\n        if (typeof observer === 'function') {\n          observer(data);\n        }\n      },\n      this\n    );\n    reqwest({\n      url: this.getUrl(),\n      data: JSON.stringify(data),\n      type: 'json',\n      method: 'post',\n      contentType: 'application/json',\n      withCredentials: true,\n      error: callback,\n      success: callback\n    });\n    return this;\n  }\n\n  registerBaseUrl(baseUrl) {\n    this.baseUrl = baseUrl;\n    return this;\n  }\n\n  addObserver(observer) {\n    this.observers.push(observer);\n  }\n};\n\nexport default Action;\n","import Action from '../Action';\n\nclass Email extends Action {\n  constructor() {\n    super();\n    this.path = 'email';\n  }\n};\n\nexport default new Email();\n","import Action from '../Action';\n\nclass File extends Action {\n  constructor() {\n    super();\n\n    this.path = 'file';\n    this.formId = 'action-file-download';\n    this.targetName = 'action-file-download-target';\n\n    this.ensureForm = this.ensureForm.bind(this);\n    this.submitForm = this.submitForm.bind(this);\n    this.setFormInput = this.setFormInput.bind(this);\n    this.ensureTarget = this.ensureTarget.bind(this);\n  }\n\n  ensureTarget() {\n    if (global.document.getElementsByName(this.targetName).length > 0) {\n      return this;\n    }\n    const iframe = global.document.createElement('iframe');\n\n    iframe.src = 'about:blank';\n    iframe.name = this.targetName;\n    iframe.style = 'visibility: hidden; display: none;';\n    global.document.body.appendChild(iframe);\n    return this;\n  }\n\n  ensureForm() {\n    if (global.document.getElementById(this.formId)) {\n      return this;\n    }\n    const form = global.document.createElement('form');\n    const input = global.document.createElement('input');\n\n    form.id = this.formId;\n    form.action = this.getUrl();\n    form.method = 'post';\n    form.target = this.targetName;\n    form.enctype = 'text/plain';\n\n    input.type = 'hidden';\n    form.appendChild(input);\n    global.document.body.appendChild(form);\n    return this;\n  }\n\n  setFormInput(data) {\n    const input = global.document.getElementById(this.formId).children[0];\n\n    input.name = JSON.stringify(data).slice(0, -1) + ',\"_\":\"';\n    input.value = '\"}';\n  }\n\n  submitForm() {\n    global.document.getElementById(this.formId).submit();\n  }\n\n  apply(data, callback) {\n    this.ensureTarget();\n    this.ensureForm();\n    this.setFormInput(data);\n    this.submitForm();\n    callback({status: 'Success'});\n  }\n};\n\nexport default new File();\n","import Action from '../Action';\n\nclass Text extends Action {\n  constructor() {\n    super();\n    this.path = 'text';\n  }\n};\n\nexport default new Text();\n","class Record {\n  constructor() {\n    this.engine = null;\n    this.registerEngine = this.registerEngine.bind(this);\n  }\n\n  registerEngine(engine) {\n    this.engine = engine;\n  }\n}\nexport default Record;\n","class Null {\n  match(data) {\n    return false;\n  }\n\n  dataToRecord() {\n    return this;\n  }\n}\n\nexport default new Null();\n","import Record from '../Record';\n\nclass Pride extends Record {\n  constructor() {\n    super();\n\n    this.dataToRecord = this.dataToRecord.bind(this);\n    this.match = this.match.bind(this);\n  }\n\n  match(data) {\n    return data instanceof this.engine.Core.Record;\n  }\n\n  dataToRecord(data) {\n    return data;\n  }\n}\n\nexport default new Pride();\n","import Record from '../Record';\n\nclass ReactHash extends Record {\n  constructor() {\n    super();\n\n    this.dataToRecord = this.dataToRecord.bind(this);\n    this.match = this.match.bind(this);\n  }\n\n  match(data) {\n    return data.datastore && data.uid;\n  }\n\n  dataToRecord(data) {\n    return this.engine.requestRecord(data.datastore, data.uid);\n  }\n}\n\nexport default new ReactHash();\n","import Record from '../Record';\n\nclass UidHash extends Record {\n  constructor() {\n    super();\n\n    this.dataToRecord = this.dataToRecord.bind(this);\n    this.match = this.match.bind(this);\n  }\n\n  match(data) {\n    return data.datastoreUid && data.recordUid;\n  }\n\n  dataToRecord(data) {\n    return this.engine.requestRecord(data.datastoreUid, data.recordUid);\n  }\n}\n\nexport default new UidHash();\n","import idleTimeout from 'idle-timeout';\n\nclass IdleTimeout {\n  constructor() {\n    this.idleTimer = null;\n    this.setIdleTimer = this.setIdleTimer.bind(this);\n  }\n\n  setIdleTimer() {\n    this.idleTimer = idleTimeout(\n      () => {},\n      {\n        element: document,\n        timeout: 3600000\n      }\n    );\n    return this;\n  }\n}\n\nexport default new IdleTimeout();\n","import VariableStorageDriver from './VariableStorageDriver';\nimport PersistantStorageDriver from './PersistantStorageDriver';\n\nlet exp = VariableStorageDriver;\n\nif (typeof global.window !== 'undefined') {\n  exp = new PersistantStorageDriver(global.window.localStorage, 'Prejudice.localStorage');\n}\n\nexport default exp;\n","import { VariableStorageDriver } from './VariableStorageDriver';\n\nclass PersistantStorageDriver extends VariableStorageDriver {\n  constructor(storage, key) {\n    super();\n    this.key = key;\n    this.storage = storage;\n    // Read has side effects that modify this.records.\n    this.read();\n    global.window.addEventListener('storage', (function (driver) {\n      return function (e) {\n        if (e.storageArea === driver.storage) {\n          driver.read();\n          driver.notifyObservers();\n        }\n      };\n    })(this));\n\n    this.read = this.read.bind(this);\n    this.write = this.write.bind(this);\n  }\n\n  getInstance() {\n    return this;\n  }\n\n  read() {\n    try {\n      this.records = JSON.parse(this.storage.getItem(this.key)) || {};\n    } catch (e) {\n      this.records = {};\n    }\n    return this;\n  }\n\n  write() {\n    this.storage.setItem(this.key, JSON.stringify(this.records));\n    return this;\n  }\n\n  add(record) {\n    if (super.add(record)) {\n      this.write();\n      return true;\n    }\n    return false;\n  }\n\n  remove(record) {\n    if (super.remove(record)) {\n      this.write();\n      return true;\n    }\n    return false;\n  }\n\n  clear(datastore) {\n    if (super.clear(datastore)) {\n      this.write();\n      return true;\n    }\n    return false;\n  }\n}\n\nexport default PersistantStorageDriver;\n","import reqwest from 'reqwest';\nimport IdleTimeout from './IdleTimeout';\n\nclass Profile {\n\n  constructor() {\n    this.last = {};\n    this.baseUrl = null;\n    this.observers = [];\n    this.interval = null;\n    this.intervalDuration = 300000;\n    this.idleDetection = IdleTimeout;\n\n    this.registerBaseUrl = this.registerBaseUrl.bind(this);\n    this.addObserver = this.addObserver.bind(this);\n    this.notifyObservers = this.notifyObservers.bind(this);\n    this.update = this.update.bind(this);\n    this.handleData = this.handleData.bind(this);\n    this.getUrl = this.getUrl.bind(this);\n    this.setInterval = this.setInterval.bind(this);\n    this.getInstance = this.getInstance.bind(this);\n  }\n\n  getInstance() {\n    return this;\n  }\n\n  setInterval() {\n    if (this.interval) {\n      return this;\n    }\n    this.interval = setInterval((function (profile) {\n      return function () {\n        profile.update();\n      };\n    })(this), this.intervalDuration);\n    return this;\n  }\n\n  notifyObservers() {\n    this.observers.forEach(function (observer) {\n      if (typeof observer === 'function') {\n        observer(this.last);\n      }\n    }, this);\n  }\n\n  update() {\n    if (this.idleDetection.idleTimer && this.idleDetection.idleTimer.isIdle) {\n      this.idleDetection.setIdleTimer();\n      return this;\n    }\n    if (this.baseUrl && this.observers.length > 0) {\n      const callback = (function (profile) {\n        return function (data) {\n          profile.handleData(data);\n        };\n      })(this);\n\n      reqwest({\n        url: this.getUrl(),\n        type: 'json',\n        method: 'get',\n        contentType: 'application/json',\n        withCredentials: true,\n        error: callback,\n        success: callback\n      });\n    }\n    return this;\n  }\n\n  handleData(data) {\n    if (JSON.stringify(this.last) !== JSON.stringify(data)) {\n      this.last = data;\n      this.notifyObservers();\n    }\n    return this;\n  }\n\n  getUrl() {\n    if (this.baseUrl) {\n      return [this.baseUrl, 'profile'].join('/');\n    }\n    return null;\n  }\n\n  addObserver(observer) {\n    observer(this.last);\n    this.observers.push(observer);\n    this.startup();\n    return this;\n  }\n\n  startup() {\n    if (!this.interval && this.baseUrl && this.observers.length > 0) {\n      this.last = {};\n      this.idleDetection.setIdleTimer();\n      this.update();\n      this.setInterval();\n    }\n    return this;\n  }\n\n  registerBaseUrl(baseUrl) {\n    this.baseUrl = baseUrl;\n    this.startup();\n    return this;\n  }\n}\n\nexport default new Profile();\n","import VariableStorageDriver from './VariableStorageDriver';\nimport PersistantStorageDriver from './PersistantStorageDriver';\n\nlet exp = VariableStorageDriver;\n\nif (typeof global.window !== 'undefined') {\n  exp = new PersistantStorageDriver(global.window.sessionStorage, 'Prejudice.sessionStorage');\n}\n\nexport default exp;\n","class VariableStorageDriver {\n  constructor() {\n    this.records = {};\n    this.observers = [];\n\n    this.addObserver = this.addObserver.bind(this);\n    this.notifyObservers = this.notifyObservers.bind(this);\n    this.add = this.add.bind(this);\n    this.remove = this.remove.bind(this);\n    this.clear = this.clear.bind(this);\n    this.list = this.list.bind(this);\n    this.count = this.count.bind(this);\n    this.findIndex = this.findIndex.bind(this);\n    this.getInstance = this.getInstance.bind(this);\n  }\n\n  getInstance() {\n    return new this.constructor();\n  }\n\n  notifyObservers() {\n    this.observers.forEach(\n      function (observer) {\n        if (typeof observer === 'function') {\n          observer(this.records);\n        }\n      },\n      this\n    );\n    return this;\n  }\n\n  addObserver(observer) {\n    this.observers.push(observer);\n    return this;\n  }\n\n  add(record) {\n    const idx = this.findIndex(record);\n\n    if (idx === -1) {\n      this.records[record.datastore] = this.records[record.datastore] || [];\n      this.records[record.datastore].push(record);\n      this.notifyObservers();\n      return true;\n    }\n    return false;\n  }\n\n  findIndex(record) {\n    if (!this.records[record.datastore]) {\n      return -1;\n    }\n    return this.records[record.datastore].findIndex(function (item) {\n      return item.datastore === record.datastore && item.uid === record.uid;\n    });\n  }\n\n  remove(record) {\n    const idx = this.findIndex(record);\n\n    if (idx >= 0) {\n      this.records[record.datastore].splice(idx, 1);\n      this.notifyObservers();\n      return true;\n    }\n    return false;\n  }\n\n  clear(datastore) {\n    if (datastore && this.count(datastore) > 0) {\n      this.records[datastore] = [];\n      this.notifyObservers();\n      return true;\n    } else if (this.count() > 0) {\n      this.records = {};\n      this.notifyObservers();\n      return true;\n    }\n    return false;\n  }\n\n  list(datastore) {\n    if (datastore) {\n      return this.records[datastore] || [];\n    }\n    let ret = [];\n\n    Object.keys(this.records).forEach(function (key) {\n      ret = ret.concat(this.list(key));\n    }, this);\n    return ret;\n  }\n\n  count(datastore) {\n    if (datastore) {\n      return this.list(datastore).length;\n    }\n    let ret = 0;\n\n    Object.keys(this.records).forEach(function (key) {\n      ret += this.count(key);\n    }, this);\n    return ret;\n  }\n}\n\nexport default new VariableStorageDriver();\nexport { VariableStorageDriver };\n","/*! idleTimeout v2.0.0 | Copyright (c) 2016-2019 Jacob MÃ¼ller */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global = global || self, global.idleTimeout = factory());\n}(this, function () { 'use strict';\n\n    var __assign = function() {\n        __assign = Object.assign || function __assign(t) {\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\n                s = arguments[i];\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n            }\n            return t;\n        };\n        return __assign.apply(this, arguments);\n    };\n\n    /** Creates an idle timeout instance. */\n\n    var IdleTimeout =\n    /** @class */\n    function () {\n      /**\r\n       * The idle timeout constructor.\r\n       * @param {Function} callback The callback function to invoke when the timeout is complete.\r\n       * @param {object} [options] The configuration options for the timeout.\r\n       * @returns {void}\r\n       */\n      function IdleTimeout(callback, options) {\n        var _this = this;\n        /** The timeout handle to reset the timeout. */\n\n\n        this.timeoutHandle = null;\n        /** Whether the timeout is idle. */\n\n        this.isIdle = false;\n        /** The start time of the timeout in milliseconds. */\n\n        this.startTime = 0;\n        /** The remaining time of the timeout in milliseconds. */\n\n        this.remainingTime = 0;\n        /** The last X-axis position on the page. */\n\n        this.lastPageX = -1;\n        /** The last Y-axis position on the page. */\n\n        this.lastPageY = -1;\n        /** The input event names. */\n\n        this.eventNames = ['DOMMouseScroll', 'mousedown', 'mousemove', 'mousewheel', 'MSPointerDown', 'MSPointerMove', 'keydown', 'touchmove', 'touchstart', 'wheel'];\n        /**\r\n         * Handle the input events.\r\n         * @param {Event} event The input event.\r\n         * @returns {void}\r\n         */\n\n        this.handleEvent = function (event) {\n          if (_this.remainingTime > 0) {\n            return;\n          }\n\n          if (event.type === 'mousemove') {\n            var _a = event,\n                pageX = _a.pageX,\n                pageY = _a.pageY;\n\n            if (pageX === undefined && pageY === undefined || pageX === _this.lastPageX && pageY === _this.lastPageY) {\n              return;\n            }\n\n            _this.lastPageX = pageX;\n            _this.lastPageY = pageY;\n          }\n\n          _this.resetTimeout();\n        };\n\n        this.callback = callback;\n        this.options = __assign({\n          element: document.body,\n          loop: false,\n          timeout: 60 * 1000 * 5\n        }, options);\n        var element = this.options.element;\n        this.eventNames.forEach(function (eventName) {\n          element.addEventListener(eventName, _this.handleEvent);\n        });\n        this.resetTimeout();\n      }\n      /**\r\n       * Pause the timeout.\r\n       * @returns {void}\r\n       */\n\n\n      IdleTimeout.prototype.pause = function () {\n        var remainingTime = this.startTime + this.options.timeout - new Date().getTime();\n\n        if (remainingTime <= 0) {\n          return;\n        }\n\n        this.remainingTime = remainingTime;\n\n        if (this.timeoutHandle) {\n          window.clearTimeout(this.timeoutHandle);\n          this.timeoutHandle = null;\n        }\n      };\n      /**\r\n       * Resume the paused timeout.\r\n       * @returns {void}\r\n       */\n\n\n      IdleTimeout.prototype.resume = function () {\n        if (this.remainingTime <= 0) {\n          return;\n        }\n\n        this.resetTimeout();\n        this.remainingTime = 0;\n      };\n      /**\r\n       * Reset the timeout.\r\n       * @returns {void}\r\n       */\n\n\n      IdleTimeout.prototype.reset = function () {\n        this.isIdle = false;\n        this.remainingTime = 0;\n        this.resetTimeout();\n      };\n      /**\r\n       * Destroy the instance.\r\n       * @returns {void}\r\n       */\n\n\n      IdleTimeout.prototype.destroy = function () {\n        var _this = this;\n\n        var element = this.options.element;\n        this.eventNames.forEach(function (eventName) {\n          element.removeEventListener(eventName, _this.handleEvent);\n        });\n\n        if (this.timeoutHandle) {\n          window.clearTimeout(this.timeoutHandle);\n        }\n      };\n      /**\r\n       * Reset the timeout function.\r\n       * @returns {void}\r\n       */\n\n\n      IdleTimeout.prototype.resetTimeout = function () {\n        var _this = this;\n\n        if (this.timeoutHandle) {\n          window.clearTimeout(this.timeoutHandle);\n          this.timeoutHandle = null;\n        }\n\n        if (this.isIdle && !this.options.loop) {\n          return;\n        }\n\n        this.timeoutHandle = window.setTimeout(function () {\n          _this.handleTimeout();\n        }, this.remainingTime || this.options.timeout);\n        this.startTime = new Date().getTime();\n      };\n      /**\r\n       * Handle the completed timeout.\r\n       * @returns {void}\r\n       */\n\n\n      IdleTimeout.prototype.handleTimeout = function () {\n        this.isIdle = true;\n        this.resetTimeout();\n        this.callback();\n      };\n\n      Object.defineProperty(IdleTimeout.prototype, \"idle\", {\n        /** Gets whether the timeout is idle. */\n        get: function get() {\n          return this.isIdle;\n        },\n\n        /**\r\n         * Sets whether the timeout is idle.\r\n         * @param {boolean} value Whether the timeout is idle.\r\n         */\n        set: function set(value) {\n          if (value) {\n            this.handleTimeout();\n          } else {\n            this.reset();\n          }\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(IdleTimeout.prototype, \"loop\", {\n        /**\r\n         * Sets wether the timeout should restart on completion.\r\n         * @param {boolean} value Wether the timeout should restart on completion.\r\n         */\n        set: function set(value) {\n          this.options.loop = value;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(IdleTimeout.prototype, \"timeout\", {\n        /**\r\n         * Sets the idle timeout in milliseconds.\r\n         * @param {number} value The idle timeout in milliseconds.\r\n         */\n        set: function set(value) {\n          this.options.timeout = value;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      return IdleTimeout;\n    }();\n\n    var idleTimeout = function idleTimeout(callback, options) {\n      return new IdleTimeout(callback, options);\n    };\n\n    return idleTimeout;\n\n}));\n//# sourceMappingURL=idle-timeout.js.map\n","/*!\n  * Reqwest! A general purpose XHR connection manager\n  * license MIT (c) Dustin Diaz 2015\n  * https://github.com/ded/reqwest\n  */\n\n!function (name, context, definition) {\n  if (typeof module != 'undefined' && module.exports) module.exports = definition()\n  else if (typeof define == 'function' && define.amd) define(definition)\n  else context[name] = definition()\n}('reqwest', this, function () {\n\n  var context = this\n\n  if ('window' in context) {\n    var doc = document\n      , byTag = 'getElementsByTagName'\n      , head = doc[byTag]('head')[0]\n  } else {\n    var XHR2\n    try {\n      XHR2 = require('xhr2')\n    } catch (ex) {\n      throw new Error('Peer dependency `xhr2` required! Please npm install xhr2')\n    }\n  }\n\n\n  var httpsRe = /^http/\n    , protocolRe = /(^\\w+):\\/\\//\n    , twoHundo = /^(20\\d|1223)$/ //http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n    , readyState = 'readyState'\n    , contentType = 'Content-Type'\n    , requestedWith = 'X-Requested-With'\n    , uniqid = 0\n    , callbackPrefix = 'reqwest_' + (+new Date())\n    , lastValue // data stored by the most recent JSONP callback\n    , xmlHttpRequest = 'XMLHttpRequest'\n    , xDomainRequest = 'XDomainRequest'\n    , noop = function () {}\n\n    , isArray = typeof Array.isArray == 'function'\n        ? Array.isArray\n        : function (a) {\n            return a instanceof Array\n          }\n\n    , defaultHeaders = {\n          'contentType': 'application/x-www-form-urlencoded'\n        , 'requestedWith': xmlHttpRequest\n        , 'accept': {\n              '*':  'text/javascript, text/html, application/xml, text/xml, */*'\n            , 'xml':  'application/xml, text/xml'\n            , 'html': 'text/html'\n            , 'text': 'text/plain'\n            , 'json': 'application/json, text/javascript'\n            , 'js':   'application/javascript, text/javascript'\n          }\n      }\n\n    , xhr = function(o) {\n        // is it x-domain\n        if (o['crossOrigin'] === true) {\n          var xhr = context[xmlHttpRequest] ? new XMLHttpRequest() : null\n          if (xhr && 'withCredentials' in xhr) {\n            return xhr\n          } else if (context[xDomainRequest]) {\n            return new XDomainRequest()\n          } else {\n            throw new Error('Browser does not support cross-origin requests')\n          }\n        } else if (context[xmlHttpRequest]) {\n          return new XMLHttpRequest()\n        } else if (XHR2) {\n          return new XHR2()\n        } else {\n          return new ActiveXObject('Microsoft.XMLHTTP')\n        }\n      }\n    , globalSetupOptions = {\n        dataFilter: function (data) {\n          return data\n        }\n      }\n\n  function succeed(r) {\n    var protocol = protocolRe.exec(r.url)\n    protocol = (protocol && protocol[1]) || context.location.protocol\n    return httpsRe.test(protocol) ? twoHundo.test(r.request.status) : !!r.request.response\n  }\n\n  function handleReadyState(r, success, error) {\n    return function () {\n      // use _aborted to mitigate against IE err c00c023f\n      // (can't read props on aborted request objects)\n      if (r._aborted) return error(r.request)\n      if (r._timedOut) return error(r.request, 'Request is aborted: timeout')\n      if (r.request && r.request[readyState] == 4) {\n        r.request.onreadystatechange = noop\n        if (succeed(r)) success(r.request)\n        else\n          error(r.request)\n      }\n    }\n  }\n\n  function setHeaders(http, o) {\n    var headers = o['headers'] || {}\n      , h\n\n    headers['Accept'] = headers['Accept']\n      || defaultHeaders['accept'][o['type']]\n      || defaultHeaders['accept']['*']\n\n    var isAFormData = typeof FormData !== 'undefined' && (o['data'] instanceof FormData);\n    // breaks cross-origin requests with legacy browsers\n    if (!o['crossOrigin'] && !headers[requestedWith]) headers[requestedWith] = defaultHeaders['requestedWith']\n    if (!headers[contentType] && !isAFormData) headers[contentType] = o['contentType'] || defaultHeaders['contentType']\n    for (h in headers)\n      headers.hasOwnProperty(h) && 'setRequestHeader' in http && http.setRequestHeader(h, headers[h])\n  }\n\n  function setCredentials(http, o) {\n    if (typeof o['withCredentials'] !== 'undefined' && typeof http.withCredentials !== 'undefined') {\n      http.withCredentials = !!o['withCredentials']\n    }\n  }\n\n  function generalCallback(data) {\n    lastValue = data\n  }\n\n  function urlappend (url, s) {\n    return url + (/\\?/.test(url) ? '&' : '?') + s\n  }\n\n  function handleJsonp(o, fn, err, url) {\n    var reqId = uniqid++\n      , cbkey = o['jsonpCallback'] || 'callback' // the 'callback' key\n      , cbval = o['jsonpCallbackName'] || reqwest.getcallbackPrefix(reqId)\n      , cbreg = new RegExp('((^|\\\\?|&)' + cbkey + ')=([^&]+)')\n      , match = url.match(cbreg)\n      , script = doc.createElement('script')\n      , loaded = 0\n      , isIE10 = navigator.userAgent.indexOf('MSIE 10.0') !== -1\n\n    if (match) {\n      if (match[3] === '?') {\n        url = url.replace(cbreg, '$1=' + cbval) // wildcard callback func name\n      } else {\n        cbval = match[3] // provided callback func name\n      }\n    } else {\n      url = urlappend(url, cbkey + '=' + cbval) // no callback details, add 'em\n    }\n\n    context[cbval] = generalCallback\n\n    script.type = 'text/javascript'\n    script.src = url\n    script.async = true\n    if (typeof script.onreadystatechange !== 'undefined' && !isIE10) {\n      // need this for IE due to out-of-order onreadystatechange(), binding script\n      // execution to an event listener gives us control over when the script\n      // is executed. See http://jaubourg.net/2010/07/loading-script-as-onclick-handler-of.html\n      script.htmlFor = script.id = '_reqwest_' + reqId\n    }\n\n    script.onload = script.onreadystatechange = function () {\n      if ((script[readyState] && script[readyState] !== 'complete' && script[readyState] !== 'loaded') || loaded) {\n        return false\n      }\n      script.onload = script.onreadystatechange = null\n      script.onclick && script.onclick()\n      // Call the user callback with the last value stored and clean up values and scripts.\n      fn(lastValue)\n      lastValue = undefined\n      head.removeChild(script)\n      loaded = 1\n    }\n\n    // Add the script to the DOM head\n    head.appendChild(script)\n\n    // Enable JSONP timeout\n    return {\n      abort: function () {\n        script.onload = script.onreadystatechange = null\n        err({}, 'Request is aborted: timeout', {})\n        lastValue = undefined\n        head.removeChild(script)\n        loaded = 1\n      }\n    }\n  }\n\n  function getRequest(fn, err) {\n    var o = this.o\n      , method = (o['method'] || 'GET').toUpperCase()\n      , url = typeof o === 'string' ? o : o['url']\n      // convert non-string objects to query-string form unless o['processData'] is false\n      , data = (o['processData'] !== false && o['data'] && typeof o['data'] !== 'string')\n        ? reqwest.toQueryString(o['data'])\n        : (o['data'] || null)\n      , http\n      , sendWait = false\n\n    // if we're working on a GET request and we have data then we should append\n    // query string to end of URL and not post data\n    if ((o['type'] == 'jsonp' || method == 'GET') && data) {\n      url = urlappend(url, data)\n      data = null\n    }\n\n    if (o['type'] == 'jsonp') return handleJsonp(o, fn, err, url)\n\n    // get the xhr from the factory if passed\n    // if the factory returns null, fall-back to ours\n    http = (o.xhr && o.xhr(o)) || xhr(o)\n\n    http.open(method, url, o['async'] === false ? false : true)\n    setHeaders(http, o)\n    setCredentials(http, o)\n    if (context[xDomainRequest] && http instanceof context[xDomainRequest]) {\n        http.onload = fn\n        http.onerror = err\n        // NOTE: see\n        // http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/30ef3add-767c-4436-b8a9-f1ca19b4812e\n        http.onprogress = function() {}\n        sendWait = true\n    } else {\n      http.onreadystatechange = handleReadyState(this, fn, err)\n    }\n    o['before'] && o['before'](http)\n    if (sendWait) {\n      setTimeout(function () {\n        http.send(data)\n      }, 200)\n    } else {\n      http.send(data)\n    }\n    return http\n  }\n\n  function Reqwest(o, fn) {\n    this.o = o\n    this.fn = fn\n\n    init.apply(this, arguments)\n  }\n\n  function setType(header) {\n    // json, javascript, text/plain, text/html, xml\n    if (header === null) return undefined; //In case of no content-type.\n    if (header.match('json')) return 'json'\n    if (header.match('javascript')) return 'js'\n    if (header.match('text')) return 'html'\n    if (header.match('xml')) return 'xml'\n  }\n\n  function init(o, fn) {\n\n    this.url = typeof o == 'string' ? o : o['url']\n    this.timeout = null\n\n    // whether request has been fulfilled for purpose\n    // of tracking the Promises\n    this._fulfilled = false\n    // success handlers\n    this._successHandler = function(){}\n    this._fulfillmentHandlers = []\n    // error handlers\n    this._errorHandlers = []\n    // complete (both success and fail) handlers\n    this._completeHandlers = []\n    this._erred = false\n    this._responseArgs = {}\n\n    var self = this\n\n    fn = fn || function () {}\n\n    if (o['timeout']) {\n      this.timeout = setTimeout(function () {\n        timedOut()\n      }, o['timeout'])\n    }\n\n    if (o['success']) {\n      this._successHandler = function () {\n        o['success'].apply(o, arguments)\n      }\n    }\n\n    if (o['error']) {\n      this._errorHandlers.push(function () {\n        o['error'].apply(o, arguments)\n      })\n    }\n\n    if (o['complete']) {\n      this._completeHandlers.push(function () {\n        o['complete'].apply(o, arguments)\n      })\n    }\n\n    function complete (resp) {\n      o['timeout'] && clearTimeout(self.timeout)\n      self.timeout = null\n      while (self._completeHandlers.length > 0) {\n        self._completeHandlers.shift()(resp)\n      }\n    }\n\n    function success (resp) {\n      var type = o['type'] || resp && setType(resp.getResponseHeader('Content-Type')) // resp can be undefined in IE\n      resp = (type !== 'jsonp') ? self.request : resp\n      // use global data filter on response text\n      var filteredResponse = globalSetupOptions.dataFilter(resp.responseText, type)\n        , r = filteredResponse\n      try {\n        resp.responseText = r\n      } catch (e) {\n        // can't assign this in IE<=8, just ignore\n      }\n      if (r) {\n        switch (type) {\n        case 'json':\n          try {\n            resp = context.JSON ? context.JSON.parse(r) : eval('(' + r + ')')\n          } catch (err) {\n            return error(resp, 'Could not parse JSON in response', err)\n          }\n          break\n        case 'js':\n          resp = eval(r)\n          break\n        case 'html':\n          resp = r\n          break\n        case 'xml':\n          resp = resp.responseXML\n              && resp.responseXML.parseError // IE trololo\n              && resp.responseXML.parseError.errorCode\n              && resp.responseXML.parseError.reason\n            ? null\n            : resp.responseXML\n          break\n        }\n      }\n\n      self._responseArgs.resp = resp\n      self._fulfilled = true\n      fn(resp)\n      self._successHandler(resp)\n      while (self._fulfillmentHandlers.length > 0) {\n        resp = self._fulfillmentHandlers.shift()(resp)\n      }\n\n      complete(resp)\n    }\n\n    function timedOut() {\n      self._timedOut = true\n      self.request.abort()\n    }\n\n    function error(resp, msg, t) {\n      resp = self.request\n      self._responseArgs.resp = resp\n      self._responseArgs.msg = msg\n      self._responseArgs.t = t\n      self._erred = true\n      while (self._errorHandlers.length > 0) {\n        self._errorHandlers.shift()(resp, msg, t)\n      }\n      complete(resp)\n    }\n\n    this.request = getRequest.call(this, success, error)\n  }\n\n  Reqwest.prototype = {\n    abort: function () {\n      this._aborted = true\n      this.request.abort()\n    }\n\n  , retry: function () {\n      init.call(this, this.o, this.fn)\n    }\n\n    /**\n     * Small deviation from the Promises A CommonJs specification\n     * http://wiki.commonjs.org/wiki/Promises/A\n     */\n\n    /**\n     * `then` will execute upon successful requests\n     */\n  , then: function (success, fail) {\n      success = success || function () {}\n      fail = fail || function () {}\n      if (this._fulfilled) {\n        this._responseArgs.resp = success(this._responseArgs.resp)\n      } else if (this._erred) {\n        fail(this._responseArgs.resp, this._responseArgs.msg, this._responseArgs.t)\n      } else {\n        this._fulfillmentHandlers.push(success)\n        this._errorHandlers.push(fail)\n      }\n      return this\n    }\n\n    /**\n     * `always` will execute whether the request succeeds or fails\n     */\n  , always: function (fn) {\n      if (this._fulfilled || this._erred) {\n        fn(this._responseArgs.resp)\n      } else {\n        this._completeHandlers.push(fn)\n      }\n      return this\n    }\n\n    /**\n     * `fail` will execute when the request fails\n     */\n  , fail: function (fn) {\n      if (this._erred) {\n        fn(this._responseArgs.resp, this._responseArgs.msg, this._responseArgs.t)\n      } else {\n        this._errorHandlers.push(fn)\n      }\n      return this\n    }\n  , 'catch': function (fn) {\n      return this.fail(fn)\n    }\n  }\n\n  function reqwest(o, fn) {\n    return new Reqwest(o, fn)\n  }\n\n  // normalize newline variants according to spec -> CRLF\n  function normalize(s) {\n    return s ? s.replace(/\\r?\\n/g, '\\r\\n') : ''\n  }\n\n  function serial(el, cb) {\n    var n = el.name\n      , t = el.tagName.toLowerCase()\n      , optCb = function (o) {\n          // IE gives value=\"\" even where there is no value attribute\n          // 'specified' ref: http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-862529273\n          if (o && !o['disabled'])\n            cb(n, normalize(o['attributes']['value'] && o['attributes']['value']['specified'] ? o['value'] : o['text']))\n        }\n      , ch, ra, val, i\n\n    // don't serialize elements that are disabled or without a name\n    if (el.disabled || !n) return\n\n    switch (t) {\n    case 'input':\n      if (!/reset|button|image|file/i.test(el.type)) {\n        ch = /checkbox/i.test(el.type)\n        ra = /radio/i.test(el.type)\n        val = el.value\n        // WebKit gives us \"\" instead of \"on\" if a checkbox has no value, so correct it here\n        ;(!(ch || ra) || el.checked) && cb(n, normalize(ch && val === '' ? 'on' : val))\n      }\n      break\n    case 'textarea':\n      cb(n, normalize(el.value))\n      break\n    case 'select':\n      if (el.type.toLowerCase() === 'select-one') {\n        optCb(el.selectedIndex >= 0 ? el.options[el.selectedIndex] : null)\n      } else {\n        for (i = 0; el.length && i < el.length; i++) {\n          el.options[i].selected && optCb(el.options[i])\n        }\n      }\n      break\n    }\n  }\n\n  // collect up all form elements found from the passed argument elements all\n  // the way down to child elements; pass a '<form>' or form fields.\n  // called with 'this'=callback to use for serial() on each element\n  function eachFormElement() {\n    var cb = this\n      , e, i\n      , serializeSubtags = function (e, tags) {\n          var i, j, fa\n          for (i = 0; i < tags.length; i++) {\n            fa = e[byTag](tags[i])\n            for (j = 0; j < fa.length; j++) serial(fa[j], cb)\n          }\n        }\n\n    for (i = 0; i < arguments.length; i++) {\n      e = arguments[i]\n      if (/input|select|textarea/i.test(e.tagName)) serial(e, cb)\n      serializeSubtags(e, [ 'input', 'select', 'textarea' ])\n    }\n  }\n\n  // standard query string style serialization\n  function serializeQueryString() {\n    return reqwest.toQueryString(reqwest.serializeArray.apply(null, arguments))\n  }\n\n  // { 'name': 'value', ... } style serialization\n  function serializeHash() {\n    var hash = {}\n    eachFormElement.apply(function (name, value) {\n      if (name in hash) {\n        hash[name] && !isArray(hash[name]) && (hash[name] = [hash[name]])\n        hash[name].push(value)\n      } else hash[name] = value\n    }, arguments)\n    return hash\n  }\n\n  // [ { name: 'name', value: 'value' }, ... ] style serialization\n  reqwest.serializeArray = function () {\n    var arr = []\n    eachFormElement.apply(function (name, value) {\n      arr.push({name: name, value: value})\n    }, arguments)\n    return arr\n  }\n\n  reqwest.serialize = function () {\n    if (arguments.length === 0) return ''\n    var opt, fn\n      , args = Array.prototype.slice.call(arguments, 0)\n\n    opt = args.pop()\n    opt && opt.nodeType && args.push(opt) && (opt = null)\n    opt && (opt = opt.type)\n\n    if (opt == 'map') fn = serializeHash\n    else if (opt == 'array') fn = reqwest.serializeArray\n    else fn = serializeQueryString\n\n    return fn.apply(null, args)\n  }\n\n  reqwest.toQueryString = function (o, trad) {\n    var prefix, i\n      , traditional = trad || false\n      , s = []\n      , enc = encodeURIComponent\n      , add = function (key, value) {\n          // If value is a function, invoke it and return its value\n          value = ('function' === typeof value) ? value() : (value == null ? '' : value)\n          s[s.length] = enc(key) + '=' + enc(value)\n        }\n    // If an array was passed in, assume that it is an array of form elements.\n    if (isArray(o)) {\n      for (i = 0; o && i < o.length; i++) add(o[i]['name'], o[i]['value'])\n    } else {\n      // If traditional, encode the \"old\" way (the way 1.3.2 or older\n      // did it), otherwise encode params recursively.\n      for (prefix in o) {\n        if (o.hasOwnProperty(prefix)) buildParams(prefix, o[prefix], traditional, add)\n      }\n    }\n\n    // spaces should be + according to spec\n    return s.join('&').replace(/%20/g, '+')\n  }\n\n  function buildParams(prefix, obj, traditional, add) {\n    var name, i, v\n      , rbracket = /\\[\\]$/\n\n    if (isArray(obj)) {\n      // Serialize array item.\n      for (i = 0; obj && i < obj.length; i++) {\n        v = obj[i]\n        if (traditional || rbracket.test(prefix)) {\n          // Treat each array item as a scalar.\n          add(prefix, v)\n        } else {\n          buildParams(prefix + '[' + (typeof v === 'object' ? i : '') + ']', v, traditional, add)\n        }\n      }\n    } else if (obj && obj.toString() === '[object Object]') {\n      // Serialize object item.\n      for (name in obj) {\n        buildParams(prefix + '[' + name + ']', obj[name], traditional, add)\n      }\n\n    } else {\n      // Serialize scalar item.\n      add(prefix, obj)\n    }\n  }\n\n  reqwest.getcallbackPrefix = function () {\n    return callbackPrefix\n  }\n\n  // jQuery and Zepto compatibility, differences can be remapped here so you can call\n  // .ajax.compat(options, callback)\n  reqwest.compat = function (o, fn) {\n    if (o) {\n      o['type'] && (o['method'] = o['type']) && delete o['type']\n      o['dataType'] && (o['type'] = o['dataType'])\n      o['jsonpCallback'] && (o['jsonpCallbackName'] = o['jsonpCallback']) && delete o['jsonpCallback']\n      o['jsonp'] && (o['jsonpCallback'] = o['jsonp'])\n    }\n    return new Reqwest(o, fn)\n  }\n\n  reqwest.ajaxSetup = function (options) {\n    options = options || {}\n    for (var k in options) {\n      globalSetupOptions[k] = options[k]\n    }\n  }\n\n  return reqwest\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(176);\n"],"sourceRoot":""}